(()=>{"use strict";let n=null,e=null,t=!1;const a=({type:n,attrs:e,container:t=null,position:a="append",evt:r,handler:i})=>{const o=document.createElement(n);return Object.keys(e).forEach((n=>{"innerHTML"!==n?o.setAttribute(n,e[n]):o.innerHTML=e[n]})),t&&"append"===a&&t.append(o),t&&"prepend"===a&&t.prepend(o),r&&i&"function"==typeof i&&o.addEventListener(r,i),o};let r=null;const i=(()=>{let n=null;return(e,t)=>{n&&(clearTimeout(n),n=null),n=setTimeout(e,t)}})();a({type:"style",attrs:{innerHTML:"\n      * {\n      box-sizing: border-box;\n    }\n    \n    body {\n      margin: 0;\n      font-family: Arial, Helvetica, sans-serif;\n    }\n    \n    .container {\n      width: min(100% - 40px, 1280px);\n      margin-inline: auto;\n    }\n    \n    .movies {\n      display: grid;\n      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n      gap: 20px;\n    }\n    \n    .movie {\n      display: flex;\n      justify-content: center;\n      align-content: center;\n    }\n    \n    .movie__image {\n      width: 100%;\n      object-fit: cover;\n    }\n    \n    .search {\n      margin-bottom: 30px;\n    }\n    \n    .search__label-input {\n      display: block;\n      margin-bottom: 7px;\n    }\n    \n    .search__input {\n      display: block;\n      max-width: 400px;\n      width: 100%;\n      padding: 10px 15px;\n      margin-bottom: 10px;\n      border: 1px solid light;\n      border-radius: 4px;\n    }\n    \n    .search__label-checkbox {\n      font-size: 15px;\n      display: inline-block;\n      transform: translate(7px, -2px);\n    }    \n      "},container:document.head}),(()=>{const r=a({type:"div",attrs:{class:"container"},container:document.body,position:"prepend"});a({type:"h1",attrs:{innerHTML:"Приложение для поиска фильмов"},container:r});const i=a({type:"div",attrs:{class:"search"},container:r}),o=a({type:"div",attrs:{class:"search__group search__group--input"},container:i}),s=a({type:"div",attrs:{class:"search__group search__group--checkbox"},container:i});a({type:"label",attrs:{class:"search__label-input",for:"search",innerHTML:"Поиск фильмов"},container:o}),e=a({type:"input",attrs:{class:"search__input",id:"search",type:"search",placeholder:"Введите текст..."},container:o}),a({type:"input",attrs:{class:"search__checkbox",id:"checkbox",type:"checkbox"},container:s,evt:"click",handler:n=>t=!t}),a({type:"label",attrs:{class:"search__label-checkbox",for:"checkbox",innerHTML:"Добавлять фильмы к существующим спискам"},container:s}),a({type:"div",attrs:{class:"movies"},container:r}),n=document.querySelector(".movies")})(),e.addEventListener("keyup",(e=>{i((()=>{const i=e.target.value.trim();var o,s;i&&i.length>3&&r!==i&&(console.log(n),t||(s=n)&&(s.innerHTML=""),(o=`http://www.omdbapi.com/?apikey=f576431d&s=${i}`,fetch(o).then((n=>n.json())).then((n=>n.Search))).then((e=>e.forEach((e=>(e=>{const t=a({type:"div",attrs:{class:"movie"},container:n});a({type:"img",attrs:{class:"movie__image",src:/(http|https):\/\//i.test(e.Poster)?e.Poster:e.Poster.alt.innerHTML="no poster",alt:e.Title,title:e.Title},container:t})})(e))))).catch(console.log)),r=i}),2e3)}))})();